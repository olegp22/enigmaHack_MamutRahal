
AI-агент для автоматической обработки входящих писем технической поддержки. 
### Цели

- Автоматизация обработки писем - сокращение времени реакции
- Структурирование данных в веб-таблице с возможностью экспорта CSV/XLSX
- Анализ эмоциональной окраски письма (позитивная, негативная, нейтральная)
- Генерация ответов на основе базы знаний

## Пользовательский путь оператора

### Этапы обработки обращения

1. Письмо поступает на почту техподдержки (автоматически через IMAP)
2. AI-агент парсит письмо и извлекает данные (ФИО, контакты, номера приборов, текст вопроса)
3. NLP-модель анализирует тональность письма
4. Классификатор определяет категорию запроса
5. Система автоматически заполняет запись в веб-таблице
6. RAG-система ищет релевантную информацию в базе знаний
7. AI генерирует черновик ответа
8. Оператор получает уведомление о новом обращении
9. Оператор просматривает таблицу с обращениями и детали запроса
10. Оператор проверяет и при необходимости редактирует сгенерированный ответ
11. Оператор утверждает и отправляет ответ клиенту
12. Система автоматически отправляет письмо через SMTP
13. Статус обращения обновляется в таблице

### Распределение автоматизации

| Процесс | Исполнитель |
|---------|-------------|
| Получение и парсинг писем | AI-агент |
| Анализ тональности | NLP модель |
| Классификация запросов | AI классификатор |
| Заполнение таблицы | Система |
| Генерация ответа | RAG + LLM |
| Проверка и редактирование | Оператор |
| Утверждение отправки | Оператор |
| Отправка письма | Система |

## Архитектура системы

### Компоненты

**1. Email Integration Layer**
- Получение писем через IMAP
- Отправка ответов через SMTP
- Обработка вложений

**2. AI-Agent Core**
- Email Parser - извлечение контактных данных, номеров приборов, текста
- NLP Analyzer - анализ тональности (RuBERT)
- Request Classifier - классификация по категориям
- Answer Generator - генерация ответов через RAG (Retrieval-Augmented Generation)

**3. База знаний**
- Руководства по эксплуатации
- FAQ и типовые решения
- История обращений
- Vector DB для семантического поиска

**4. База данных PostgreSQL**
- Таблица обращений (messages)
- Справочники эмоций и категорий
- Операторы и вложения
- История изменений

**5. Backend API (FastAPI)**
- REST API endpoints для управления обращениями
- WebSocket для real-time обновлений
- Интеграция с AI моделями
- Экспорт данных в CSV/XLSX

**6. Frontend (React + Vite)**
- Таблица обращений с фильтрацией
- Просмотр и редактирование ответов
- Dashboard с аналитикой
- Управление базой знаний

**7. Notification System** (планируемо)
- Telegram bot для уведомлений
- Web Push notifications
- Email для критических событий

### Взаимодействие компонентов

```
Клиент → Email Server (IMAP) → Email Parser → AI Agent →
→ [NLP Analyzer + Classifier + RAG Generator] →
→ PostgreSQL + Vector DB → Backend API → Web UI → Оператор →
→ SMTP Server → Клиент
```

## Технологический стек

**Backend:**
- FastAPI 0.133.0, Python 3.11
- PostgreSQL 15, SQLAlchemy 2.0
- IMAP/SMTP для email

**AI/ML:**
- Hugging Face Transformers
- RuBERT (sentiment analysis)
- Conversational RuBERT (classification)
- sentence-transformers (embeddings)
- ChromaDB/Faiss (vector DB)
- YandexGPT/GigaChat/Llama-3 (LLM)

**Frontend:**
- React 19, Vite 7
- TailwindCSS 4
- Lucide React

**DevOps:**
- Docker, Docker Compose
- Nginx

## Быстрый старт

### Запуск через Docker

**Windows:**
```powershell
.\docker-start.ps1
```

**Linux/Mac:**
```bash
chmod +x docker-start.sh
./docker-start.sh
```

**Или вручную:**
```bash
# Production
docker-compose up -d --build

# Development (с hot-reload)
docker-compose -f docker-compose.dev.yml up -d --build
```

### Доступ к сервисаи

- Frontend: http://localhost:3000 (production) / http://localhost:5173 (dev)
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs
- PostgreSQL: localhost:5432

## Структура веб-таблицы

| Поле | Описание |
|------|----------|
| Дата | Дата поступления письма |
| ФИО | Фамилия, имя, отчество отправителя |
| Email | Адрес электронной почты |
| Телефон | Контактный телефон |
| Объект | Название предприятия или объекта |
| Заводские номера | Номера приборов (газоанализаторов) из письма |
| Тип прибора | Модель или тип устройства |
| Эмоциональный окрас | Тональность: позитив/нейтраль/негатив |
| Категория | Тип запроса: неисправность, калибровка, документация и т.д. |
| Суть вопроса | Краткое описание проблемы или запроса |
| Ответ | Сгенерированный или отредактированный ответ |
| Статус | Новое, в работе, отправлено |

## Риски

* Отсутсвие опыта.

* Монолитная система (если одна часть полетит, то полетит вся система). Микро сервисы долго поднимать
